1. Получить доступ к серверу, login
2. Открыть порты 22265 для ssh, 80 для http, 443 для https, 5555 для flower
3. Изменить настройки /etc/ssh/sshd_config:
	- port 22265
	- PubkeyAuthentication yes
	- PermitRootLogin no
	- PasswordAuthentication no
4. Перезапуск
	sudo systemctl restart ssh
5. Сгенерировать новые ключи ssh в папке для сервера:
	ssh-keygen -t rsa
6. Проверить вход по новому порту
7. Создать нового пользователя
	# adduser <name>
	# usermod -aG sudo <name>
	# su <name>
8. создать /home/<user>/.ssh/authorized_keys
9. скопировать .pub в authorized_keys
10. подключиться с новыми ключами
11. Изменить настройки /etc/ssh/sshd_config:
	- AllowUsers <user>
	- DenyUsers <old_user>
12. Перезапуск
	sudo systemctl restart ssh
	
sudo apt update
sudo apt -y install postgresql

sudo apt install maven

sudo apt install git
13. Docker
	sudo apt update &&\
	sudo apt install apt-transport-https ca-certificates curl software-properties-common
	curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
	sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable" &&\
	sudo apt update &&\
	sudo apt install docker-ce &&\
	sudo systemctl status docker # checks status
14. Docker-compose:
	sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose
	sudo chmod +x /usr/local/bin/docker-compose &&\
	docker-compose --version # check version


15. remote machine	
	for private git repo
		ssh-keygen -t rsa // для подключения к github
		скопировать id_rsa.pub в deploy keys репозитория
		mcedit ~/.ssh/config
			Host github.com
			HostName github.com
			User git
			AddKeysToAgent yes
			IdentityFIle ~/.ssh/github/id_rsa

16. mkdir web/<project> && cd web/<project>
16.1	sudo apt install git
16.2	git clone https://github.com/j-thrash/tgbot_skillfactory.git
17. local machine:
	edit ~/.ssh/config
		Host <name>
	    HostName <ip_remote_host>
	    User <user_remote_host>
	    IdentityFIle ~/ggg/bonds/docker-bonds/ssh/oraclecloud/id_rsa
18. copy env files
19. cd web/<project>
	sudo docker-compose -f docker-compose-db.yml up -d
	sudo bash start.sh
